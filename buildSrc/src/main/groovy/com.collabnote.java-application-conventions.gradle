/*
 * This file was generated by the Gradle 'init' task.
 */

plugins {
    // Apply the common convention plugin for shared build configuration between library and application projects.
    id 'com.collabnote.java-common-conventions'

    // Apply the application plugin to add support for building a CLI application in Java.
    id 'application'

    // id 'com.palantir.docker'
}

jar {
    duplicatesStrategy = DuplicatesStrategy.EXCLUDE
    manifest {
        attributes "Main-Class": application.mainClass
    }
}

task jarRun(type: Exec) {
    dependsOn jar
    group = "Execution"
    description = "Run the output executable jar with ExecTask"
    commandLine "java", "-jar", jar.archiveFile.get()
}

// docker {
//     dependsOn jar
//     name project.name
//     dockerfile file("$rootDir/buildSrc/Dockerfile")
//     files tasks.distTar.outputs, "${jar.archiveFile.get()}"
//     buildArgs([JAR_FILE: "${jar.archiveFileName.get()}"])
// }
